<template name="assignment">
  <div class="header">
    <h1>
      {{assignment.name}}
    </h1>
    <a href="#" class="course-link">
      Back to {{course.name}}
    </a>
  </div>
  <div class="content dash-content">
    <div class="pure-g" id="course-info">
      <h3 class="content-subhead">
	Assignment Info
      </h3>
      <table class="dashboard-table">
	<tr>
	  <td>
	    <p class="course-page-title" style="height:20px;">
	      Created:
	    </p>
	  </td>
	  <td>
	    <p>
	      {{assignment.created_at}}
	    </p>
	  </td>
	</tr>
	<tr>
	  <td>
	    <p class="course-page-title" style="height:20px;">
	      Due:
	    </p>
	  </td>
	  <td>
	    <p>
	      {{assignment.due_at}}
	    </p>
	  </td>
	</tr>
	<tr>
	  <td>
	    <p class="course-page-title" style="height:20px;">
	      Points Possible:
	    </p>
	  </td>
	  <td>
	    <p>
	      {{assignment.points_possible}}
	    </p>
	  </td>
	</tr>
	<tr>
	  <td>
	    <p class="course-page-title" style="height:20px;">
	      Ungraded:
	    </p>
	  </td>
	  <td>
	    <p>
	      {{assignment.needs_grading_count}}
	    </p>
	  </td>
	</tr>
      </table>
    </div>
    <div class="pure-g">
      <div style="width:100%">
	<h3 class="content-subhead">
	  Assignments
	</h3>
	<div id="submission-table">
	  <table class="dashboard-table">
            <thead>
              <tr class="table-header">
		<td>Student</td>
		<td>Submitted</td>
		<td>Grader</td>
		<td>Graded?</td>
              </tr>
            </thead>
            <br>
            <tbody>
              {{#each submissions}}
              <tr>
		<td>
		  <a href="#" class="course-link">
                    <p class="course-link-inner">
                      {{this.user.name}}
                    </p>
		  </a>
		</td>
		<td>
		  {{#if this.submitted_at}}
		  {{this.submitted_at}}
		  {{else}}
		  No Submission Time
		  {{/if}}
		</td>
		<td>
		  {{#if this.grader_id}}
		  {{this.grader_id}}
		  {{else}}
		  Not Yet Graded
		  {{/if}}
		</td>
		<td>
		  {{#if this.graded_at}}
		  <i class="fa fa-check-square-o"></i>
		  {{/if}}
		  <a href="#" class="grade-submission pure-button">Grade</a>
		</td>
              </tr>
              {{/each}}
	    </tbody>
	  </table>
	</div>
      </div>
    </div>
    <div class="pure-g">
      <h3 class="content-subhead">
	Grader Analytics
      </h3>
      <table class="dashboard-table" id="stat-table">
        <thead>
          <tr class="table-header">
            <td>Grader</td>
            <td>Average Score</td>
	    <td>Number Graded</td>
          </tr>
        </thead>
        <br>
        <tbody>
          {{#each graderStats}}
          <tr>
            <td>
	      <a href="#" class="course-link">
                <p class="course-link-inner">
                  {{this.grader_id}}
                </p>
	      </a>
            </td>
            <td>
	      {{this.mean}}
            </td>
	    <td>
	      {{this.scores.length}}
	    </td>
          </tr>
          {{/each}}
	</tbody>
      </table>
    </div>
    <br>
    <div class="pure-g" style="letter-spacing:1px;">
      {{> highchartsHelper chartId="readerAverages" chartWidth="100%" chartHeight="100%" chartObject=boxChart}}
    </div>
    <br>
    <div class="pure-g" style="letter-spacing:1px;">
      {{> highchartsHelper chartId="gradeHistogram" chartWidth="100%" chartHeight="100%" chartObject=histoChart}}
    </div>
  </div>
</template>
